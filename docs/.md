ubscriber (Officer) View: ~10-12 Core Screens
This is the main user-facing part of the application.

Onboarding & Authentication

Login/Sign-Up Screen: Standard entry point for users with email/password and Multi-Factor Authentication (MFA).

Subscription & Billing Screen: Where the user chooses a plan, enters payment details, and manages their active subscription.

Main Dashboard & Case Management 3. Main Dashboard: An overview screen showing active cases, recent notifications, and quick actions like "Start a New Case." 4. All Cases Screen: A list view of all past and present cases, each showing its current status (e.g., "AI Analysis," "CVO Review," "Completed"). 5.

New Case Intake Screen: A guided form for creating a new case, which includes secure document upload for various formats like PDF, scans, and audio notes.

Individual Case View 6. Case Details Dashboard: The central hub for a single case, containing:

- A live progress tracker timeline.
- The "Case Folder" with all associated documents.
- The

Defence Scorecard™ showing risk percentages.

- The

Vigilance Radar™ for tracking deadlines.

7.

Document Viewer Screen: An integrated viewer to read uploaded documents and AI-generated drafts, with features to compare different versions.

8.  AI Defence Assistant (Chat Screen): The conversational interface where the officer can chat with the AI about their case, ask for rule clarifications, and get real-time answers based on their documents.
9.

Final Draft & Submission Screen: Where the officer can review the final draft, use tools like redaction or watermarking, and download the complete submission package.

Account Management 10. Profile & Settings Screen: (Updated per your feedback) A dedicated screen where the user can:

- View and edit their personal details (Name, Contact Info).
- Change their password.
- Manage MFA settings.

- Set notification preferences (email, etc.).

CVO & Legal Board (Expert Reviewer) View: ~4-5 Core Screens
A streamlined, professional workspace focused on efficiency.

Reviewer Login: A secure login screen, potentially with IP allow-lists for sensitive roles.

Assignment Dashboard/Queue: A list of cases assigned for review, showing case ID, status, and deadline.

Case Review Interface: A comprehensive screen for reviewers to:

View all case documents.

Read the AI-generated draft.

Use the

AI Copilot for issue spotting and finding precedent snippets.

Fill out checklists and add comments or edits.

For the Legal Board, perform the "Judicial Audit Check".

Escalation/Finalize Screen: A simple screen with options to either "Approve and Return to Subscriber" or "Escalate to Supervisory Board." The Legal Board would have an option to "Submit Final Memo".

Admin/Owner View: ~6-7 Core Screens
The backend control panel for managing the entire platform.

Admin Login: A secure entry point.

Main Admin Dashboard: An overview of key platform metrics: active subscribers, revenue, cases in progress, and system health.

User Management Screen: To view and manage all subscriber and expert reviewer accounts.

Subscription Plan Management Screen: (New screen per your feedback) Where the owner can create, edit, and define different subscription tiers or "package plans" (e.g., Basic, Premium, Pay-per-case). This includes setting prices, features, and usage limits for each plan.

Case Management & Routing Screen: To oversee all cases on the platform and manually intervene in case routing if necessary.

Billing & Financials Screen: To manage and view all billing transactions and financial data, supporting the automated billing system.

System Settings & Audit Trail Screen: To control platform policies (like data retention), view the immutable, hash-chained audit logs, and manage system toggles.

screens
ubscriber (Officer) View: ~10-12 Core Screens
This is the main user-facing part of the application.

Onboarding & Authentication

Login/Sign-Up Screen: Standard entry point for users with email/password and Multi-Factor Authentication (MFA).

Subscription & Billing Screen: Where the user chooses a plan, enters payment details, and manages their active subscription.

Main Dashboard & Case Management 3. Main Dashboard: An overview screen showing active cases, recent notifications, and quick actions like "Start a New Case." 4. All Cases Screen: A list view of all past and present cases, each showing its current status (e.g., "AI Analysis," "CVO Review," "Completed"). 5.

New Case Intake Screen: A guided form for creating a new case, which includes secure document upload for various formats like PDF, scans, and audio notes.

Individual Case View 6. Case Details Dashboard: The central hub for a single case, containing:

- A live progress tracker timeline.
- The "Case Folder" with all associated documents.
- The

Defence Scorecard™ showing risk percentages.

- The

Vigilance Radar™ for tracking deadlines.

7.

Document Viewer Screen: An integrated viewer to read uploaded documents and AI-generated drafts, with features to compare different versions.

8.  AI Defence Assistant (Chat Screen): The conversational interface where the officer can chat with the AI about their case, ask for rule clarifications, and get real-time answers based on their documents.
9.

Final Draft & Submission Screen: Where the officer can review the final draft, use tools like redaction or watermarking, and download the complete submission package.

Account Management 10. Profile & Settings Screen: (Updated per your feedback) A dedicated screen where the user can:

- View and edit their personal details (Name, Contact Info).
- Change their password.
- Manage MFA settings.

- Set notification preferences (email, etc.).

CVO & Legal Board (Expert Reviewer) View: ~4-5 Core Screens
A streamlined, professional workspace focused on efficiency.

Reviewer Login: A secure login screen, potentially with IP allow-lists for sensitive roles.

Assignment Dashboard/Queue: A list of cases assigned for review, showing case ID, status, and deadline.

Case Review Interface: A comprehensive screen for reviewers to:

View all case documents.

Read the AI-generated draft.

Use the

AI Copilot for issue spotting and finding precedent snippets.

Fill out checklists and add comments or edits.

For the Legal Board, perform the "Judicial Audit Check".

Escalation/Finalize Screen: A simple screen with options to either "Approve and Return to Subscriber" or "Escalate to Supervisory Board." The Legal Board would have an option to "Submit Final Memo".

Admin/Owner View: ~6-7 Core Screens
The backend control panel for managing the entire platform.

Admin Login: A secure entry point.

Main Admin Dashboard: An overview of key platform metrics: active subscribers, revenue, cases in progress, and system health.

User Management Screen: To view and manage all subscriber and expert reviewer accounts.

Subscription Plan Management Screen: (New screen per your feedback) Where the owner can create, edit, and define different subscription tiers or "package plans" (e.g., Basic, Premium, Pay-per-case). This includes setting prices, features, and usage limits for each plan.

Case Management & Routing Screen: To oversee all cases on the platform and manually intervene in case routing if necessary.

Billing & Financials Screen: To manage and view all billing transactions and financial data, supporting the automated billing system.

System Settings & Audit Trail Screen: To control platform policies (like data retention), view the immutable, hash-chained audit logs, and manage system toggles.

prompt
Batch 1 of 6
Login/Sign-Up Screen

Prompt: A secure and professional login screen for a legal tech application. The design must feature a gradient background with deep saffron at the top, fading to white, then to dark green at the bottom. The central login panel should be semi-transparent white. All text and buttons, including fields for email/password and a prominent login button, must use a sharp navy blue color to stand out. An option for MFA should be clearly visible.

Subscription & Billing Screen

Prompt: A subscription and billing screen for a SaaS application. It must display three subscription plan cards on a clean white background section. The header section of the screen is deep saffron, and the footer is dark green. The plan cards must have navy blue titles and buttons. Key features should be listed in black text for readability, and the selected plan should have a navy blue border.

Main Dashboard

Prompt: A clean main dashboard for a legal tech app. A deep saffron header bar must contain the app logo and user profile icon. The main background must be white. Cards for "Active Cases" and "Recent Notifications" should have subtle navy blue borders or headers. The primary call-to-action button, "Start a New Case," must be a solid navy blue. A dark green footer provides a visual anchor.

All Cases Screen

Prompt: An "All Cases" screen displaying a list of cases. The screen must have a deep saffron header. The main content area, with a white background, must show a table with navy blue text for headers and case IDs. Status tags can use other colors for coding, but all action buttons must be navy blue. The bottom of the screen must have a dark green footer.

Batch 2 of 6
New Case Intake Screen

Prompt: A "New Case Intake" screen designed with a deep saffron header and dark green footer. The central area on a white background must feature a guided multi-step form. The form fields and the secure document upload area must have navy blue borders. Instructional text should be in navy blue, and the "Next" or "Upload" buttons must be a solid navy blue.

Case Details Dashboard

Prompt: A "Case Details Dashboard" for a single case. The layout must feature a deep saffron header bar. The main content on a white background must include a navy blue progress tracker timeline. Widgets for "Case Folder," "Defence Scorecard™," and "Vigilance Radar™" must have navy blue titles and borders. Key metrics and deadlines should be highlighted in navy blue text. A dark green footer completes the design.

Document Viewer Screen

Prompt: An integrated "Document Viewer" screen. It must have a deep saffron header and a dark green footer. The main document viewing area must be white to maximize readability. A sidebar for version comparison must use navy blue text for version names (e.g., "AI Draft v1"). The "Compare" button and any highlighted text showing differences must be navy blue.

AI Defence Assistant (Chat Screen)

Prompt: A conversational "AI Defence Assistant" chat screen. The screen's header must be deep saffron. The chat history area must have a clean white background. The user's chat bubbles can be light grey, while the AI Assistant's chat bubbles must be navy blue. The text input field at the bottom must have a navy blue border, and the "Send" button must be solid navy blue. The screen ends with a dark green footer.

Batch 3 of 6
Final Draft & Submission Screen

Prompt: A "Final Draft & Submission" screen with a deep saffron header and dark green footer. The central document preview area must be on a white background. A toolbar with tools like "Redact" and "Watermark" must use navy blue icons and text. The main call-to-action, a large "Download Submission Package" button, must be a solid navy blue.

Profile & Settings Screen

Prompt: A "Profile & Settings" screen organized with tabs. The screen must feature a deep saffron header and dark green footer. The main content area is white. The tabs ("Edit Profile," "Security") must have navy blue text, with the active tab underlined in navy blue. All input fields and buttons like "Save Changes" or "Manage MFA" must use the navy blue color.

Reviewer Login

Prompt: A secure "Reviewer Login" screen for CVO/Legal Board members. The design must use a gradient from deep saffron at the top to dark green at the bottom. The central login form is on a semi-transparent white panel. The title, input fields for "Reviewer ID," and the "Login" button must all be in a professional navy blue.

Assignment Dashboard/Queue

Prompt: An "Assignment Dashboard/Queue" for expert reviewers. The screen must have a deep saffron header and a dark green footer. The main table listing the assigned cases is on a white background. The table headers ("Case ID," "Deadline") must be in bold navy blue text. The case IDs themselves can also be in navy blue to act as links.

Batch 4 of 6
Case Review Interface

Prompt: A comprehensive "Case Review Interface." It must have a deep saffron header. The multi-panel layout is on a white background. Titles for each panel ("Case Documents," "AI-Generated Draft," "AI Copilot") must be in navy blue. Buttons within the "AI Copilot" like "Issue Spotting" and interactive checklist items must use navy blue.

Escalation/Finalize Screen

Prompt: A minimalist "Escalation/Finalize Screen." The screen must have a deep saffron header and a dark green footer. On a clean white background, the two main choice buttons, "Approve and Return" and "Escalate to Board," must be solid navy blue with white text. A secondary button for "Submit Final Memo" can have a navy blue border with a white fill.

Admin Login

Prompt: A secure "Admin Login" screen. The design must be authoritative with a gradient from deep saffron to dark green. The central login box is on a white panel. The title "Administrator Access," input fields, and the login button must all be in a strong navy blue. A security warning at the bottom should also be in navy blue.

Main Admin Dashboard

Prompt: The "Main Admin Dashboard" with a deep saffron header and dark green footer. The main dashboard area must be white. Data visualization widgets for metrics like "Active Subscribers" and "Revenue" must have navy blue titles and borders. Charts and graphs must use navy blue and dark green for their data points.

Batch 5 of 6
User Management Screen

Prompt: An admin's "User Management Screen." It must have a deep saffron header and a dark green footer. The user table is on a white background. Table headers and clickable user IDs must be in navy blue. Action buttons for each user, such as "Edit" and "Suspend," must be styled in navy blue.

Subscription Plan Management Screen

Prompt: An admin screen for "Subscription Plan Management." It must have a deep saffron header and dark green footer. On a white background, the interface for creating and editing plans must use navy blue for titles, input field labels, and "Save Plan" buttons to ensure consistency with the rest of the admin panel.

Case Management & Routing Screen

Prompt: An admin's "Case Management & Routing Screen." It must feature a deep saffron header and dark green footer. The comprehensive table of all platform cases is on a white background. The table headers must be navy blue. The "Actions" column, with crucial buttons like "Re-assign," must use solid navy blue buttons for clarity.

Billing & Financials Screen

Prompt: An admin's "Billing & Financials Screen." It must have a deep saffron header and dark green footer. The main area on a white background displays financial charts and tables. Titles for widgets like "MRR" and table headers for "Recent Transactions" must be in navy blue. The line graph showing revenue trends should be drawn in navy blue.

Batch 6 of 6
System Settings & Audit Trail Screen

Prompt: The "System Settings & Audit Trail Screen" for admins. It must have a deep saffron header and dark green footer. On a white background, the "System Settings" section has toggles and controls with navy blue text labels. The "Audit Trail" section must display the log with timestamps and user actions in navy blue text for easy reading against the white background.
Of course. Here is a complete and detailed set of prompts for each screen and feature, incorporating the visual style from your modern design direction and the specific functional requirements from the project proposal.

Subscriber (Officer) View
This is the main user-facing part of the application, designed to be clean, professional, and reassuring.

1. Login/Sign-Up Screen
   Prompt: A modern and secure login screen for a 2025 legal tech app. The design features a clean, off-white background. On the left, a minimalist, abstract graphic subtly incorporates deep saffron and dark green. On the right, a white panel with a soft shadow contains the login form.

Header: "Welcome Back" in a crisp, sans-serif navy blue font.

Input Fields: Fields for "Email" and "Password" with thin navy blue borders that glow subtly when active.

Primary Button: A solid navy blue "Login" button with white text and a slight lift effect on hover.

MFA Option: A clearly visible secondary button with a navy blue outline for Multi-Factor Authentication (MFA).

Secondary Link: Below, a navy blue link says "Don't have an account? Register."

2. Register Screen
   Prompt: A clean and welcoming user registration screen, consistent with the modern login page design. It uses an off-white background with the same subtle saffron and green abstract graphic on the left.

Form Panel: A white registration panel on the right includes fields for "Full Name," "Email," "Password," and "Confirm Password," all with high-contrast navy blue borders.

Consent: A clear, required checkbox for agreeing to Terms of Service.

Primary Button: The main call-to-action is a solid navy blue button that says "Create Account."

Secondary Link: A navy blue link below asks "Already have an account? Login." The design must be spacious and guide the user through the process effortlessly.

3. Subscription & Billing Screen

Prompt: A visually appealing and clear screen for the automated subscription and billing process. The background is a clean, light grey.

Plan Cards: Three subscription plan cards are displayed horizontally, each with a subtle shadow for a floating effect. The cards have a white background and sharp navy blue titles.

Highlight: A "Most Popular" tag in deep saffron is placed on the premium plan.

Features: Key features are listed with small, dark green checkmark icons for readability.

Action Buttons: The primary action button on each card is solid navy blue.

Selection State: The currently selected plan must have a bold navy blue border, making the user's choice obvious.

4. Main Dashboard
   Prompt: A clean, data-rich main dashboard. The header is minimal, with the logo accented in deep saffron and a user profile icon, all on a white background. The main view uses a card-based layout on an off-white canvas.

Active Cases Widget: A dynamic card showing a summary of active cases with progress bars in navy blue.

Notifications Widget: A card for "Recent Notifications" using icons to differentiate message types.

Primary Action: A prominent, solid navy blue button with a subtle saffron icon that says "Start a New Case."

Data Visualization: Any charts or graphs should use a palette of navy blue, dark green, and a muted saffron for clarity.

5. All Cases Screen
   Prompt: A highly functional "All Cases" screen designed for clarity. The background is off-white.

Data Table: The screen is dominated by a data table with clean lines and generous padding.

Table Headers: Headers like "Case ID," "Status," and "Last Updated" are in bold navy blue text.

Search & Filter: A powerful search and filter bar at the top allows for easy sorting.

Status Tags: Case status tags are color-coded with soft, accessible colors (e.g., light blue for "AI Analysis," light orange for "CVO Review", light green for "Completed").

Interactive Elements: All interactive elements, like a "View Details" button for each case, are solid navy blue to clearly indicate they are clickable.

6. New Case Intake Screen
   Prompt: A guided, multi-step "New Case Intake" screen. The central area on an off-white background must feature a simple, step-by-step form.

Secure Upload: A prominent and secure document upload area that explicitly accepts PDFs, scans, and audio notes. This area should have a navy blue dashed border and a clear "Drag & Drop" or "Browse Files" instruction.

Form Fields: All input fields and instructional text should be in navy blue.

Navigation Buttons: The "Next" or "Upload Documents" buttons must be a solid navy blue.

7. Case Details Dashboard
   Prompt: A comprehensive and organized "Case Details Dashboard" for a single case. The layout uses a tabbed interface ("Overview," "Documents," "Timeline") with navy blue text for titles, and the active tab is indicated with a deep saffron underline. The main background is off-white.

Defence Scorecard™: A clean widget card with a navy blue header displaying the Defence Scorecard™ using a gauge or percentage to show the risk level.

Vigilance Radar™: A timeline widget card labeled Vigilance Radar™ that clearly displays all upcoming deadlines. Critical deadlines are highlighted in bold navy blue or saffron.

Case Folder: A widget that provides access to all uploaded and generated documents.

8. Document Viewer Screen
   Prompt: An advanced and user-friendly "Document Viewer." The screen features a distraction-free, off-white reading area.

Toolbar: A toolbar at the top provides tools like "Download" with minimalist navy blue icons.

Version Comparison: A key feature is a "Compare Versions" button. When active, changes between drafts are highlighted in a non-intrusive light green for additions and a soft red for deletions, showing

diff/highlight between versions.

Navigation: A collapsible side panel allows for easy navigation between all documents in the case folder. The design must prioritize readability with excellent typography and contrast.

9. AI Defence Assistant (Chat Screen)
   Prompt: A sleek and modern "AI Defence Assistant" chat interface. The chat history area has a clean off-white background.

Chat Bubbles: The AI assistant's responses are in bubbles with a light navy blue fill and white text. The user's messages are in bubbles with a simple light grey fill.

Functionality: The AI should be able to answer questions and provide rule clarifications based on the case documents.

Input Field: The text input field at the bottom has a navy blue border that highlights when focused.

Send Button: The "Send" button is a navy blue circle with a paper plane icon that animates on click.

10. Final Draft & Submission Screen
    Prompt: A professional screen focused on final actions. A large preview of the final document dominates the center on a clean white background.

Tools Sidebar: A right-hand sidebar provides final tools like Redaction and Watermarking, represented by clear navy blue icons and labels.

Checklist: A pre-submission checklist with green checkmarks confirms all steps are complete.

Primary Action: The main call-to-action, "Download Submission Package", is a large, unmissable solid navy blue button at the bottom of the sidebar.

11. Profile & Settings Screen
    Prompt: A clear and easy-to-navigate "Profile & Settings" screen.

Navigation: A vertical navigation menu on the left uses navy blue icons and text for categories like "Personal Info," "Security," and "Notifications." The active section is highlighted with a deep saffron bar.

Content Area: The content area on the right uses clean forms with navy blue bordered input fields and toggles.

Security: The "Security" section must allow the user to change their password and manage MFA settings.

Action Buttons: The "Save Changes" button is solid navy blue, while secondary actions are outlined in navy blue.

CVO & Legal Board (Expert Reviewer) View
A streamlined, professional workspace focused on efficiency and authority.

1. Reviewer Login
   Prompt: A highly secure and professional login screen for expert reviewers. The design is minimalist and authoritative, with a light grey background.

Form Panel: A central white panel with a subtle shadow contains the login form, titled "Expert Reviewer Portal" in navy blue.

Fields & Button: The input fields and login button are navy blue for high contrast.

Security Icon: A small, dark green shield icon is placed next to the title to signify the secure, access-controlled nature of the portal, which may use IP allow-lists.

2. Assignment Dashboard/Queue
   Prompt: An efficient and data-driven "Assignment Dashboard" for reviewers. The layout is a clean table on an off-white background showing the

assignment queue.

Table: Cases in the queue are sortable and filterable by Case ID, Status, and Deadline.

Priority Tag: Each case row includes a priority tag (e.g., a saffron tag for "Urgent").

Interaction: Hovering over a case row subtly highlights it and reveals a "Start Review" button in navy blue. The design must help the reviewer quickly identify and act on critical assignments.

3. Case Review Interface
   Prompt: A powerful, multi-column "Case Review Interface" designed for deep work. The interface uses a light grey background to differentiate it from the subscriber view.

Layout: The left column lists all case documents. The center column displays the document or AI draft. The right column contains the "AI Copilot" and checklists.

Panel Titles: All panel titles are in navy blue.

AI Copilot: The AI Copilot actively provides suggestions for

issue spotting, precedent snippets, and tone calibration. These suggestions can be accepted with one click.

Checklists: Interactive disciplinary and vigilance checklists turn dark green when checked.

Legal Board Feature: For the Supervisory Legal Board, this interface must include a feature to perform the "Judicial Audit Check".

4. Escalation/Finalize Screen
   Prompt: A simple and decisive "Escalation/Finalize Screen." On a clean, off-white background, the screen presents a clear summary of the review.

Action Buttons: The two primary action buttons, "Approve & Return" and "Escalate to Board," are large and distinct. "Approve" is a solid dark green button, while "Escalate" is a solid saffron/amber button to indicate caution.

Legal Board Action: The "Submit Final Memo" option for the Legal Board is a primary navy blue button.

Admin/Owner View
The backend control panel, designed to be authoritative, data-rich, and secure.

1. Admin Login
   Prompt: An authoritative "Admin Login" screen. It uses a dark mode aesthetic with a deep navy blue background.

Form Panel: A central, softly illuminated panel contains the login fields.

Title: The title "Administrator Control Panel" is in a crisp white font.

Input Fields: Input fields have subtle glowing borders when active.

Login Button: The login button uses a deep saffron accent color to stand out against the dark background.

2. Main Admin Dashboard
   Prompt: A dynamic and insightful "Main Admin Dashboard," available in both light and dark themes. The layout is a customizable grid of widgets.

Metrics: Widgets show key metrics like Active Subscribers, Monthly Recurring Revenue (MRR), Active Cases, and System Health.

Charts: Charts use a professional palette of navy blue, deep saffron, and dark green for data series.

Data Display: The data must be presented in real-time, with key numbers in a large, bold font for at-a-glance understanding.

3. User Management Screen
   Prompt: A comprehensive "User Management" table with advanced search and filtering. On a clean off-white background, the user table is clearly laid out to manage

role-based access.

Actions: Admin actions like "Suspend User" or "Change Role" are housed within a navy blue "Actions" dropdown menu for each user, keeping the interface tidy.

Search: A search bar allows admins to instantly find any user by name, email, or role.

4. Subscription Plan Management Screen
   Prompt: An intuitive drag-and-drop interface for "Subscription Plan Management."

Functionality: Admins can reorder plans, edit features and pricing inline, and create new plans from a template.

Visual Interface: The interface is highly visual, showing each plan as a card.

Action Button: The "Save Changes" button is a prominent navy blue.

Confirmation: A saffron-colored banner appears at the top to confirm when changes are live.

5. Case Management & Routing Screen

Prompt: A powerful "Case Management & Routing" dashboard resembling a command center, used to oversee all cases and manage case routing.

Real-time Feed: It shows a real-time feed of all active cases. Admins can filter cases by status, CVO assignment, or flags.

Manual Intervention: A key feature is the ability to manually re-assign a case by dragging it to a different CVO's queue.

Critical Actions: Critical actions like "Re-assign" are highlighted in saffron to prevent accidental clicks.

6. Billing & Financials Screen

Prompt: A detailed "Billing & Financials" screen with rich data visualizations to monitor the platform's auto subscription/billing system.

Visualizations: It features an interactive line graph of revenue over time, a pie chart of plan distribution, and a searchable table of all transactions.

Reporting: Admins must be able to export reports directly from this screen.

Design: The design uses navy blue for headers and tables, with saffron and green used to highlight positive or negative trends in the charts.

7. System Settings & Audit Trail Screen
   Prompt: A secure and clear "System Settings & Audit Trail" screen.

Settings: The settings are organized into logical sections like "Security," "Data Retention," and "Integrations," using a tabbed layout. Any critical settings change requires the admin to re-enter their password for confirmation.

Audit Trail: The "Audit Trail" section must present the immutable, time-stamped hash-chained audit logs in a highly readable format. Different action types (e.g., 'Login', 'Delete', 'Export') should be color-coded for quick scanning.
PS D:\client\govt-officers-defence> del src\models\subscription.model.ts src\models\subscriptionPackage.model.ts src\services\subscription.service.ts src\services\subscriptionPackage.service.ts src\routes\v1\subscription.routes.ts src\routes\v1\plan.routes.ts src\types\subscription.types.ts src\types\plan.types.ts src\middleware\subscriptionFeature.middleware.ts
Remove-Item : A positional parameter cannot be found that accepts argument
'src\models\subscriptionPackage.model.ts'.
At line:1 char:1

- del src\models\subscription.model.ts src\models\subscriptionPackage.m ...
- ```
    + CategoryInfo          : InvalidArgument: (:) [Remove-Item], ParameterBinding
   Exception
    + FullyQualifiedErrorId : PositionalParameterNotFound,Microsoft.PowerShell.Com
   mands.RemoveItemCommand
  ```

PS D:\client\govt-officers-defence> Remove-Item src\models\subscription.model.ts, src\models\subscriptionPackage.model.ts, src\services\subscription.service.ts, src\services\subscriptionPackage.service.ts, src\routes\v1\subscription.routes.ts, src\routes\v1\plan.routes.ts, src\types\subscription.types.ts, src\types\plan.types.ts, src\middleware\subscriptionFeature.middleware.ts
PS D:\client\govt-officers-defence>

The Complete Database Schema
This is the final PostgreSQL schema designed for your application.

SQL

-- Create custom ENUM types for data consistency across the application
CREATE TYPE user_role AS ENUM ('officer', 'cvo', 'legal_board', 'admin');
CREATE TYPE account_status AS ENUM ('pending_verification', 'active', 'inactive', 'suspended');
CREATE TYPE case_status AS ENUM ('intake', 'ai_analysis', 'awaiting_officer_review', 'awaiting_cvo_review', 'awaiting_legal_review', 'finalized', 'archived');
CREATE TYPE review_type AS ENUM ('cvo', 'legal_board');

-- Enable the pgvector extension for AI-related vector embeddings
CREATE EXTENSION IF NOT EXISTS vector;

---

## -- 1. Users & Profiles

CREATE TABLE users (
id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
email VARCHAR(255) UNIQUE NOT NULL,
password_hash VARCHAR(255) NOT NULL,
role user_role NOT NULL,
account_status account_status NOT NULL DEFAULT 'pending_verification',
mfa_enabled BOOLEAN NOT NULL DEFAULT FALSE,
mfa_secret VARCHAR(255),
created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

CREATE TABLE user_profiles (
user_id UUID PRIMARY KEY REFERENCES users(id) ON DELETE CASCADE,
first_name VARCHAR(100) NOT NULL,
last_name VARCHAR(100) NOT NULL,
employee_id VARCHAR(100) UNIQUE,
cadre_service VARCHAR(100),
designation_rank VARCHAR(100),
profile_photo_url TEXT,
head_office_address TEXT,
branch_office_address TEXT,
country VARCHAR(100),
state VARCHAR(100),
district VARCHAR(100),
city VARCHAR(100),
preferred_language VARCHAR(50) DEFAULT 'en-US',
updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

---

## -- 2. Subscriptions & Plans

CREATE TABLE plans (
id SERIAL PRIMARY KEY,
name VARCHAR(100) UNIQUE NOT NULL,
price_monthly NUMERIC(10, 2) NOT NULL,
features JSONB -- e.g., {"max_cases": 5, "cvo_review_enabled": true}
);

CREATE TABLE subscriptions (
id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
plan_id INTEGER NOT NULL REFERENCES plans(id),
payment_provider_subscription_id VARCHAR(255) UNIQUE,
status VARCHAR(50) NOT NULL,
start_date TIMESTAMPTZ NOT NULL,
end_date TIMESTAMPTZ,
created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

---

## -- 3. Cases & Documents

CREATE TABLE cases (
id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
officer_user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
case_title VARCHAR(255) NOT NULL,
status case_status NOT NULL DEFAULT 'intake',
assigned_cvo_id UUID REFERENCES users(id),
assigned_legal_board_id UUID REFERENCES users(id),
created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

CREATE TABLE documents (
id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
case_id UUID NOT NULL REFERENCES cases(id) ON DELETE CASCADE,
original_filename VARCHAR(255) NOT NULL,
cloudinary_public_id TEXT UNIQUE NOT NULL,
secure_url TEXT NOT NULL,
file_type VARCHAR(100),
file_size_bytes BIGINT,
ocr_text TEXT,
vector_embedding VECTOR(1536),
uploaded_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

---

## -- 4. AI & Reviews

CREATE TABLE ai_drafts (
id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
case_id UUID NOT NULL REFERENCES cases(id) ON DELETE CASCADE,
version INTEGER NOT NULL,
content TEXT NOT NULL,
defence_score NUMERIC(5, 2),
confidence_score NUMERIC(5, 2),
created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
UNIQUE(case_id, version)
);

CREATE TABLE reviews (
id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
case_id UUID NOT NULL REFERENCES cases(id) ON DELETE CASCADE,
reviewer_id UUID NOT NULL REFERENCES users(id),
review_type review_type NOT NULL,
comments TEXT,
status VARCHAR(50) NOT NULL,
created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

---

## -- 5. Security

CREATE TABLE audit_logs (
id BIGSERIAL PRIMARY KEY,
user_id UUID REFERENCES users(id),
action VARCHAR(255) NOT NULL,
details JSONB,
previous_hash VARCHAR(64),
current_hash VARCHAR(64) UNIQUE NOT NULL,
created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- Add indexes for performance
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_subscriptions_user_id ON subscriptions(user_id);
CREATE INDEX idx_cases_officer_id ON cases(officer_user_id);
CREATE INDEX idx_documents_case_id ON documents(case_id);
Part 3: All TypeScript Types
Here are the complete TypeScript types, organized by file.

src/types/user.types.ts
TypeScript

export type UserRole = 'officer' | 'cvo' | 'legal_board' | 'admin';
export type AccountStatus = 'pending_verification' | 'active' | 'inactive' | 'suspended';

export interface User {
id: string;
email: string;
password_hash: string;
role: UserRole;
account_status: AccountStatus;
mfa_enabled: boolean;
mfa_secret?: string;
created_at: Date;
updated_at: Date;
}

export interface UserProfile {
user_id: string;
first_name: string;
last_name: string;
employee_id?: string;
// ... all other profile fields
}

export type UserWithProfile = User & UserProfile;

export type CreateUserDto = Pick<UserProfile, 'first_name' | 'last_name'> & {
email: string;
password: string;
};

export type UpdateUserProfileDto = Partial<Omit<UserProfile, 'user_id' | 'updated_at'>>;
(Other type files like case.types.ts, auth.types.ts, etc., would follow the same detailed structure provided in previous answers.)

Part 4: The Complete API Endpoint Specification
This section details every API endpoint your application will need.

Auth Service API (/api/v1/auth)
Register New User: POST /auth/register
Login User: POST /auth/login
Refresh Access Token: POST /auth/refresh-token
User Service API (/api/v1/users)
Get My Profile: GET /users/me
Update My Profile: PUT /users/me
Case Service API (/api/v1/cases)
Create a New Case: POST /cases
Get My Cases: GET /cases
Get a Specific Case: GET /cases/:caseId
Add a Document to a Case: POST /cases/:caseId/documents
Submit a Review: POST /cases/:caseId/review
Subscription Service API (/api/v1/)
List Available Plans: GET /plans
Create a Subscription: POST /subscriptions
Admin Service API (/api/v1/admin)
List All Users: GET /admin/users
Update User Status: PUT /admin/users/:userId/status
(Detailed request/response bodies and permissions for each are listed in the previous, more detailed API specification answer.)

Part 5: Backend Flow with This Folder Structure
This is the complete request lifecycle for a core feature: an officer creating a new case and uploading a document.

1. Initial Request (Client -> API)

An authenticated officer clicks "Start a New Case" in the frontend.

The client sends a POST /api/v1/cases request with a JWT in the Authorization header and { "caseTitle": "..." } in the body.

2. Routing (src/routes/ -> src/controllers/)

The request hits src/server.ts, which passes it to src/app.ts.

The main router in src/routes/index.ts directs the /cases path to the case.routes.ts file.

In src/routes/case.routes.ts, the route is matched: router.post('/', authenticate, hasRole(['officer']), CaseController.createCase);.

3. Middleware (src/middleware/)

The authenticate middleware in auth.middleware.ts runs first. It verifies the JWT and attaches the user payload ({ userId, role, email }) to the req object.

The hasRole(['officer']) middleware runs next, confirming req.user.role is 'officer'.

(If this were a subscription-limited feature, checkSubscriptionFeature would run here).

4. Controller (src/controllers/case.controller.ts)

The createCase function is executed.

It uses a Zod schema from case.validation.ts to validate the request body.

It calls the business logic layer: const newCase = await CaseService.createCase(req.user.userId, req.body);.

It sends a 201 Created response back to the client with the newCase data.

5. Service (src/services/case.service.ts)

The createCase function here contains the business logic.

It calls the data access layer: const createdCase = await CaseModel.create(userId, caseData);.

It may also perform other logic, like creating an initial audit log entry.

6. Model (src/models/case.model.ts)

The create function is the only part of the code that touches the database.

It executes a raw SQL query: INSERT INTO cases (officer_user_id, case_title) VALUES ($1, $2) RETURNING \*;.

It returns the newly created database record back up to the service.

7. Asynchronous AI Flow (Document Upload & Processing)

Document Upload: The user now uploads a document. The client sends the file to Cloudinary and gets back a URL. The client then makes a POST /api/v1/cases/:caseId/documents request to your backend with the Cloudinary URL and other metadata.

Enqueue Job: After the document.service.ts saves the document record to the database, it calls a function in src/jobs/queue.ts, like addAiProcessingJob(documentId). This adds a new job to the BullMQ queue (managed by Redis). The API request then finishes and returns a success response to the user immediately.

Background Processing: In a separate process, the worker defined in src/jobs/processors/aiDraftProcessor.ts picks up the job from the queue.

Execution: The worker fetches the document text from Cloudinary (via its OCR add-on), sends it to the AI service defined in src/config/ai.ts, gets the draft reply, and saves it to the ai_drafts table by calling a function in src/models/case.model.ts.
